name: Backport
on:
  pull_request_target:
    # types:
    #   - closed
    #   - labeled

jobs:
  backport:
    name: Backport
    runs-on: ubuntu-latest
    # if: >
    #   github.event.pull_request.merged
    #   && (
    #     github.event.action == 'closed'
    #     || (
    #       github.event.action == 'labeled'
    #       && contains(github.event.label.name, 'backport')
    #     )
    #   )
    steps:
      - uses: actions/checkout@v3

      - name: Backport PR
        run: |
          git checkout v1.3.x
          git cherry-pick ${{ github.event.pull_request.base.sha }}..${{ github.event.pull_request.head.sha }}